{% extends "base.html" %}
{% block content %}
<h1 class="mb-4">My Applications</h1>

{% if applications %}
<div class="card shadow-sm">
  <div class="table-responsive">
    <table class="table table-hover table-striped mb-0">
      <thead class="table-dark">
        <tr>
          <th>Job Title</th>
          <th>Company</th>
          <th>Status</th>
          <th>Applied On</th>
        </tr>
      </thead>
      <tbody>
        {% for a in applications %}
        <tr>
          <td><a href="{{ url_for('job_detail', job_id=a.job.id) }}">{{ a.job.title }}</a></td>
          <td>{{ a.job.company }}</td>
          <td>
            {# Assign a color based on status #}
            {% set status_color = 'secondary' %}
            {% if a.status == 'accepted' %}{% set status_color = 'success' %}{% endif %}
            {% if a.status == 'rejected' %}{% set status_color = 'danger' %}{% endif %}
            <span class="badge text-bg-{{ status_color }}">{{ a.status|capitalize }}</span>
          </td>
          <td>{{ a.applied_at.strftime("%Y-%m-%d") }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>
{% else %}
<div class="text-center p-5 border rounded">
    <p class="h4">You haven't applied for any jobs yet.</p>
    <a href="{{ url_for('jobs_list') }}" class="btn btn-primary mt-3">Find Jobs â†’</a>
</div>
{% endif %}
{% endblock %}